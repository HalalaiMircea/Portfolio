<div class="position-relative text-center">
    <img src="@ImagesSrc[currentIndex]" alt="Carousel image" style="max-width: 100%; max-height: 300px;" />

    @*TODO: make transition fade-in anims*@
    <div class="dots">
        @for (var i = 0; i < ImagesSrc.Length; i++)
        {
            int i1 = i;
            <span @onclick="() => GoToSlide(i1)" class=@(currentIndex == i1 ? "active" : null)></span>
        }
    </div>
</div>

<div class="d-flex justify-content-center">
    <button @onclick="Previous">◀</button>
    <button @onclick="Next">▶</button>
</div>

@code {
    private int currentIndex = 0;

    [Parameter]
    public required string[] ImagesSrc { get; set; }

    protected override void OnParametersSet()
    {
        ImagesSrc = ImagesSrc.Select(s => !s.StartsWith("http") ? "img/" + s : s).ToArray();
    }

    private void Previous()
    {
        currentIndex = (currentIndex - 1 + ImagesSrc.Length) % ImagesSrc.Length;
    }

    private void Next()
    {
        currentIndex = (currentIndex + 1) % ImagesSrc.Length;
    }

    private void GoToSlide(int idx)
    {
        currentIndex = idx;
    }
}
